<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ²–ç¹© 5 å¤© 4 å¤œè¦ªå­éŠ (2026/3/28èµ·)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease-out; }
        .day-card { display: none; }
        .day-card.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .nav-btn { @apply text-[10px] bg-green-100 text-green-700 px-2 py-1 rounded-md ml-2 inline-flex items-center hover:bg-green-200; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .coffee-break { @apply bg-orange-50 border-l-4 border-orange-300 p-3 rounded-r-lg my-2 text-sm; }
        .meal-tag { @apply inline-block bg-yellow-100 text-yellow-800 text-[10px] px-2 py-0.5 rounded-full font-bold mb-1; }
        .breakfast-tag { @apply inline-block bg-pink-100 text-pink-800 text-[10px] px-2 py-0.5 rounded-full font-bold mb-1 mr-1; }
        .checklist-item { @apply flex items-center space-x-3 p-3 border-b border-gray-50 last:border-0; }
        .checklist-item input[type="checkbox"] { @apply w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500; }

        /* æ–°å¢å€å¡Šé–‹å§‹ï¼šæ™‚é–“è»¸æ¨£å¼èª¿æ•´ */
        .day-card-enhanced {
            background: #ffffff;
            border-radius: 1.25rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid #f1f5f9;
        }
        .timeline-container {
            position: relative;
            padding-left: 32px; /* å¢åŠ å·¦å´é–“è·ä»¥é¿é–‹æ™‚é–“é‡ç–Š */
            margin-left: 8px;
        }
        .timeline-container::before {
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            bottom: 5px;
            width: 2px;
            background: #e2e8f0;
            border-radius: 1px;
        }
        .timeline-item {
            position: relative;
            padding-bottom: 28px;
        }
        .timeline-item:last-child { padding-bottom: 0; }
        .timeline-dot {
            position: absolute;
            left: -69px; /* èª¿æ•´åœ“é»ç›¸å°æ–¼ç·šæ¢çš„ä½ç½® */
            margin-left: 32px;
            top: 6px;
            width: 12px;
            height: 12px;
            background: #3b82f6;
            border: 2px solid #fff;
            border-radius: 50%;
            z-index: 10;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
        .timeline-time {
            display: block;
            font-size: 0.75rem;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: 4px;
            letter-spacing: 0.025em;
        }
        .timeline-title {
            font-weight: 700;
            color: #1e293b;
            font-size: 0.95rem;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }
        .timeline-desc {
            font-size: 0.8rem;
            color: #64748b;
            line-height: 1.6;
        }
        /* æ–°å¢å€å¡ŠçµæŸ */
    </style>
</head>
<body class="bg-gray-50 pb-24">

    <!-- Top Navigation Tabs -->
    <header class="bg-blue-600 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-md mx-auto px-4 pt-4 pb-2">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-xl font-bold">ğŸŒ¸ æ²–ç¹©åˆèˆª ğŸŒ¸</h1>
                <div class="flex space-x-2">
                    <button onclick="setupApiKey()" class="bg-white/20 p-2 rounded-full hover:bg-white/30 transition">
                        <i class="fas fa-key text-sm"></i>
                    </button>
                    <button onclick="toggleAIChat()" class="bg-white/20 p-2 rounded-full hover:bg-white/30 transition">
                        <i class="fas fa-robot text-sm"></i>
                    </button>
                </div>
            </div>
            <div class="flex bg-blue-700/50 rounded-xl p-1 mb-2">
                <button onclick="switchMainTab('itinerary')" id="main-tab-itinerary" class="flex-1 py-2 text-sm font-bold rounded-lg bg-white text-blue-700 transition-all">è¡Œç¨‹è¦åŠƒ</button>
                <button onclick="switchMainTab('preparation')" id="main-tab-preparation" class="flex-1 py-2 text-sm font-bold rounded-lg text-white transition-all">è¡Œå‰æº–å‚™</button>
                <button onclick="switchMainTab('notes')" id="main-tab-notes" class="flex-1 py-2 text-sm font-bold rounded-lg text-white transition-all">æ³¨æ„äº‹é …</button>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto p-4">

        <!-- Tab 1: è¡Œç¨‹è¦åŠƒ -->
        <div id="content-itinerary" class="tab-content active">
            <!-- Logistics Info -->
            <div class="bg-white rounded-xl p-3 shadow-sm mb-4 border border-blue-100 text-[10px]">
                <div class="flex justify-between mb-1">
                    <span><i class="fas fa-plane-departure mr-1"></i> JAL NU302 (TPE 10:00 - OKA 12:30)</span>
                    <span><i class="fas fa-taxi mr-1"></i> TDV-1965</span>
                </div>
                <div class="flex justify-between">
                    <span><i class="fas fa-plane-arrival mr-1"></i> AirAsia FD231 (OKA 16:55 - TPE 17:30)</span>
                    <span><i class="fas fa-taxi mr-1"></i> TAR-288</span>
                </div>
            </div>

            <!-- Day Selector -->
            <div class="flex space-x-2 mb-6 overflow-x-auto pb-2 no-scrollbar text-xs">
                <button onclick="showDay(1)" id="btn-1" class="day-btn flex-shrink-0 w-20 py-2 rounded-lg bg-blue-600 text-white shadow-md text-center">
                    <div class="font-bold">D1 æ°´æ—é¤¨</div>
                    <div class="text-[9px] opacity-80">3/28 (å…­)</div>
                </button>
                <button onclick="showDay(2)" id="btn-2" class="day-btn flex-shrink-0 w-20 py-2 rounded-lg bg-white text-gray-600 border border-gray-200 text-center">
                    <div class="font-bold">D2 å‹•ç‰©åœ’</div>
                    <div class="text-[9px] opacity-80">3/29 (æ—¥)</div>
                </button>
                <button onclick="showDay(3)" id="btn-3" class="day-btn flex-shrink-0 w-20 py-2 rounded-lg bg-white text-gray-600 border border-gray-200 text-center">
                    <div class="font-bold">D3 ç¾åœ‹æ‘</div>
                    <div class="text-[9px] opacity-80">3/30 (ä¸€)</div>
                </button>
                <button onclick="showDay(4)" id="btn-4" class="day-btn flex-shrink-0 w-20 py-2 rounded-lg bg-white text-gray-600 border border-gray-200 text-center">
                    <div class="font-bold">D4 å—éƒ¨</div>
                    <div class="text-[9px] opacity-80">3/31 (äºŒ)</div>
                </button>
                <button onclick="showDay(5)" id="btn-5" class="day-btn flex-shrink-0 w-20 py-2 rounded-lg bg-white text-gray-600 border border-gray-200 text-center">
                    <div class="font-bold">D5 è³¦æ­¸</div>
                    <div class="text-[9px] opacity-80">4/01 (ä¸‰)</div>
                </button>
            </div>

            <div id="days-container">
                <!-- Day 1 -->
                <div id="day-1" class="day-card active">
                    <div class="mb-4 text-center">
                        <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-bold border border-blue-100">2026å¹´3æœˆ28æ—¥ (é€±å…­)</span>
                    </div>
                    <div class="day-card-enhanced">
                        <div class="timeline-container">
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">08:00 - 10:00</span>
                                <h3 class="timeline-title">æ¡ƒæ©Ÿ T2 èµ·é£›</h3>
                                <p class="timeline-desc">JAL åŒ…å«é£›æ©Ÿé¤(ç„¡å…’ç«¥é¤)ï¼Œå°å­©å¯å…ˆåœ¨æ©Ÿä¸Šç”¨é¤åŠè£œçœ ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">14:00 - 15:00</span>
                                <h3 class="timeline-title">é‚£éœ¸æ©Ÿå ´å–è»Š</h3>
                                <p class="timeline-desc">å–è»Šå¾Œç›´æ¥å‰å¾€è±å´åœ°å€ï¼ˆç´„ 15 åˆ†é˜è»Šç¨‹ï¼‰ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #10b981;"></div>
                                <span class="timeline-time">15:15 - 17:00</span>
                                <h3 class="timeline-title">DMM Kariyushi æ°´æ—é¤¨ <a href="https://www.google.com/maps/search/DMM+Kariyushi+Aquarium" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <p class="timeline-desc">å„ªå…ˆçœ‹é­šï¼å®¤å…§å†·æ°£èˆ’é©ï¼Œå°å­©å¯ä»¥è‡ªç”±èµ°å‹•çœ‹è§¸æ‘¸æ± ï¼Œæ¸›ç·©æ­æ©Ÿç–²å‹ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">17:00 - 18:30</span>
                                <h3 class="timeline-title">iias è±å´ï¼šå¿«é€Ÿæ¡è²· ğŸ¼</h3>
                                <p class="timeline-desc">å°±åœ¨éš”å£ã€‚ç›´å¥”è¥¿æ¾å±‹è²·ã€Œé€™å…©å¤©ã€å¿…å‚™çš„å¥¶ç²‰å°¿å¸ƒï¼Œå…¶é¤˜å¤§æ¡è³¼ç•™çµ¦ D2 æˆ– D4ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #f59e0b;"></div>
                                <span class="timeline-time">19:00 - 20:30</span>
                                <div class="meal-tag">æ™šé¤æ¨è–¦ï¼šé€šå ‚æ‹‰éºµ</div>
                                <h3 class="timeline-title">ãƒˆãƒ©ãƒ™ãƒ«ãƒ›ã‚¹ãƒ†ãƒ«naha-de.asobu Check-in <a href="https://www.google.com/maps/search/naha-de.asobu" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <p class="timeline-desc">ä½å®¿åœ°é»ï¼šãƒˆãƒ©ãƒ™ãƒ«ãƒ›ã‚¹ãƒ†ãƒ«naha-de.asobuã€‚å°å­©é è¨ˆ 21:00 å‰å°±å¯¢ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day 2 -->
                <div id="day-2" class="day-card">
                    <div class="mb-4 text-center">
                        <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-bold border border-blue-100">2026å¹´3æœˆ29æ—¥ (é€±æ—¥)</span>
                    </div>
                    <div class="day-card-enhanced">
                        <div class="timeline-container">
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">08:30 - 09:30</span>
                                <div class="breakfast-tag">æ¨è–¦æ—©é¤ï¼šç”˜å‘³è™• è¬ä¸¸</div>
                                <h3 class="timeline-title">æ™¨é–“æ—©é¤èˆ‡å‡ºç™¼</h3>
                                <p class="timeline-desc">äº«ç”¨åå¤å±‹å¼çš„é»é£²æ–™é€æ—©é¤æœå‹™ï¼Œé©åˆå°å­©åƒåšç‰‡åå¸ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">10:00 - 11:30</span>
                                <h3 class="timeline-title">æ™®å¤©æ»¿å®®åƒæ‹œ <a href="https://www.google.com/maps/search/Futenma+Shrine" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <p class="timeline-desc">é˜ä¹³çŸ³æ´å…§æ¶¼çˆ½ï¼Œå¸¶å°å­©ç°¡å–®åƒè§€ç¥ˆç¦ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #10b981;"></div>
                                <span class="timeline-time">12:00 - 14:30</span>
                                <h3 class="timeline-title">æ²–ç¹©å…’ç«¥ç‹åœ‹ <a href="https://www.google.com/maps/search/Okinawa+Zoo+%26+Museum" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <div class="meal-tag">åˆé¤ï¼šåœ’å€å…§ç°¡å–®ç”¨é¤</div>
                                <p class="timeline-desc">é‡é»ï¼šé¤µé£Ÿå¤§è±¡é•·é ¸é¹¿ã€‚é€™è£¡æ¯”ä¸€èˆ¬å‹•ç‰©åœ’æ›´é©åˆå¹¼ç«¥èµ°å‹•ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">15:00 - 18:30</span>
                                <h3 class="timeline-title">AEON Mall Rycom æ°¸æ—º <a href="https://www.google.com/maps/search/AEON+Mall+Okinawa+Rycom" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <div class="coffee-break">
                                    <i class="fas fa-star mr-2 text-orange-400"></i><strong>å¤§äººæ™‚åˆ»ï¼š</strong>å°å­©æ¨è»Šåˆç¡ã€‚é€›æ——è‰¦åº—ã€‚1 æ¨“å¤§é­šç¼¸æ˜¯å‰›ç¡é†’å°å­©çš„æœ€æ„›ã€‚
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #f59e0b;"></div>
                                <span class="timeline-time">19:00 - 20:30</span>
                                <div class="meal-tag">æ™šé¤ï¼šãã‚‰å£½å¸ (æ°¸æ—ºåº—)</div>
                                <p class="timeline-desc">è¿´è½‰å£½å¸æ–¹ä¾¿å¸¶å°å­©ï¼Œä¸”æœ‰æ‰­è›‹å¯ä»¥ç©ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day 3 -->
                <div id="day-3" class="day-card">
                    <div class="mb-4 text-center">
                        <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-bold border border-blue-100">2026å¹´3æœˆ30æ—¥ (é€±ä¸€)</span>
                    </div>
                    <div class="day-card-enhanced">
                        <div class="timeline-container">
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">09:00 - 10:30</span>
                                <div class="breakfast-tag">æ¨è–¦æ—©é¤ï¼šè±¬è‚‰è›‹é£¯ç³°</div>
                                <h3 class="timeline-title">æ³¢ä¸Šå®® & æµ·ç˜ <a href="https://www.google.com/maps/search/Naminoue+Beach" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <p class="timeline-desc">æµ·ç˜è¸©æ°´ï¼Œæ²™å­å¾ˆç´°ã€‚é€™æ™‚å€™æ°´æº«æ¶¼çˆ½é©åˆç©ä¸€ä¸‹æ°´ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #10b981;"></div>
                                <span class="timeline-time">11:00 - 13:00</span>
                                <h3 class="timeline-title">æµ¦æ·»å¤§å…¬åœ’ <a href="https://www.google.com/maps/search/Urasoe+Dai+Park" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <p class="timeline-desc">å°ˆå±¬ 1-3 æ­²å¹¼å…’éŠæ¨‚å ´ï¼Œæ”¾é›»çµ•ä½³å ´æ‰€ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #f59e0b;"></div>
                                <span class="timeline-time">13:30 - 15:30</span>
                                <div class="meal-tag">åˆé¤ï¼šç‰çƒä¹‹ç‰› (åŒ—è°·åº—)</div>
                                <h3 class="timeline-title">ç¾æ¿±åœ°å€åˆé¤</h3>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">15:30 - 19:00</span>
                                <h3 class="timeline-title">ç¾åœ‹æ‘æ•£ç­– <a href="https://www.google.com/maps/search/American+Village+Okinawa" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <div class="coffee-break">
                                    <i class="fas fa-sun mr-2 text-orange-400"></i><strong>å¤§äººæ™‚åˆ»ï¼š</strong>åœ¨ Zhyvago Coffee çœ‹æµ·ã€‚å‚æ™šé»ç‡ˆèˆ‡å¤•é™½éå¸¸æµªæ¼«ã€‚
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #f59e0b;"></div>
                                <span class="timeline-time">19:30 - 21:00</span>
                                <div class="meal-tag">æ™šé¤ï¼šæš–æš®æ‹‰éºµ (ä¸­åŸåº—)</div>
                                <p class="timeline-desc">å›ç¨‹é€”ä¸­ç”¨é¤ï¼Œé¿é–‹å¸‚å€äººæ½®ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day 4 -->
                <div id="day-4" class="day-card">
                    <div class="mb-4 text-center">
                        <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-bold border border-blue-100">2026å¹´3æœˆ31æ—¥ (é€±äºŒ)</span>
                    </div>
                    <div class="day-card-enhanced">
                        <div class="timeline-container">
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">09:00 - 10:30</span>
                                <div class="breakfast-tag">æ¨è–¦æ—©é¤ï¼šoHacortÃ© Bakery</div>
                                <h3 class="timeline-title">ç¾å‘³åå¸æ—©é¤</h3>
                                <p class="timeline-desc">åœ¨é‚£éœ¸å¸‚å€çš„é«˜è³ªæ„ŸéºµåŒ…æ—©åˆé¤åº—ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #10b981;"></div>
                                <span class="timeline-time">11:00 - 13:30</span>
                                <h3 class="timeline-title">å¹³å’Œç¥ˆå¿µå…¬åœ’ <a href="https://www.google.com/maps/search/Okinawa+Peace+Memorial+Park+Playground" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <p class="timeline-desc">å…¨æ²–ç¹©æœ€å¼·å¹¼å…’å…¬åœ’ï¼Œå°ˆå±¬é®é™½èˆ‡å®‰å…¨åœ°æ¿è¨­æ–½ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #f59e0b;"></div>
                                <span class="timeline-time">14:00 - 15:30</span>
                                <div class="meal-tag">åˆé¤ï¼šå¥§æ­¦å³¶å¤©å©¦ç¾…</div>
                                <h3 class="timeline-title">å¥§æ­¦å³¶çœ‹è²“</h3>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">16:00 - 18:30</span>
                                <h3 class="timeline-title">ç€¨é•·å³¶å¤•é™½ <a href="https://www.google.com/maps/search/Umikaji+Terrace+Senagajima" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <div class="coffee-break">
                                    <i class="fas fa-plane mr-2 text-orange-400"></i><strong>å¤§äººæ™‚åˆ»ï¼š</strong>çœ‹é£›æ©Ÿèµ·é™ï¼Œå“åšå¹¸ç¦é¬†é¤…ã€‚
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #f59e0b;"></div>
                                <span class="timeline-time">19:00 - 20:30</span>
                                <div class="meal-tag">æ™šé¤ï¼šç€¨é•·å³¶ç¾é£Ÿå»£å ´</div>
                                <p class="timeline-desc">äº«å—åœ¨æµ·é‚Šçš„æœ€å¾Œä¸€é “æ™šé¤ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day 5 -->
                <div id="day-5" class="day-card">
                    <div class="mb-4 text-center">
                        <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-bold border border-blue-100">2026å¹´4æœˆ1æ—¥ (é€±ä¸‰)</span>
                    </div>
                    <div class="day-card-enhanced">
                        <div class="timeline-container">
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">09:00 - 11:00</span>
                                <div class="breakfast-tag">æ¨è–¦æ—©é¤ï¼šé£¯åº—æ—©é¤</div>
                                <h3 class="timeline-title">æ‚ é–’é€€æˆ¿</h3>
                                <p class="timeline-desc">æœ€å¾Œæ•´ç†è¡Œæï¼Œå‰å¾€åœ‹éš›é€šã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot" style="background: #10b981;"></div>
                                <span class="timeline-time">11:00 - 13:00</span>
                                <h3 class="timeline-title">åœ‹éš›é€š / ç‰§å¿—å¸‚å ´ <a href="https://www.google.com/maps/search/Kokusai+Dori" target="_blank" class="nav-btn"><i class="fas fa-map-marker-alt mr-1"></i>å°èˆª</a></h3>
                                <p class="timeline-desc">æœ€å¾Œçš„ä¼´æ‰‹ç¦®è¡åˆºï¼ˆé»‘ç³–ã€è—¥å¦ï¼‰ã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">13:30 - 14:30</span>
                                <h3 class="timeline-title">åŠ æ²¹ã€é‚„è»Šã€å‰å¾€æ©Ÿå ´</h3>
                                <p class="timeline-desc">14:55 å‰éœ€æŠµé”é‚£éœ¸æ©Ÿå ´ï¼Œè¾¦ç† Air Asia ç™»æ©Ÿæ‰‹çºŒã€‚</p>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <span class="timeline-time">16:55 - 17:30</span>
                                <h3 class="timeline-title">è¿”æŠµå°ç£</h3>
                                <p class="timeline-desc">å¹³å®‰å›å®¶ï¼ŒæœŸå¾…ä¸‹æ¬¡æ—…è¡Œã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: è¡Œå‰æº–å‚™ -->
        <div id="content-preparation" class="tab-content">
            <div class="space-y-6">
                <!-- é‡è¦è­‰ä»¶ -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="bg-blue-50 px-4 py-3 border-b border-blue-100 flex items-center justify-between">
                        <span class="font-bold text-blue-800">ğŸªª é‡è¦è­‰ä»¶èˆ‡æ–‡ä»¶</span>
                        <span class="text-[10px] bg-blue-200 text-blue-700 px-2 py-0.5 rounded">ä¸å¯éºå¿˜</span>
                    </div>
                    <div class="p-2">
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">è­·ç…§ (å¤§äººå°å­©å…± 3 æœ¬)</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">å°ç£é§•ç…§æ­£æœ¬ + æ—¥æ–‡è­¯æœ¬ (é–‹è»Šè€…)</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">Visit Japan Web æˆªåœ– (ç™»æ©Ÿç”¨)</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">æ—¥å¹£ç¾é‡‘ + ä¿¡ç”¨å¡ (é›™ç³»çµ±)</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">æµ·å¤–æ—…éŠå¹³å®‰éšªè­‰æ˜</span></label>
                    </div>
                </div>

                <!-- å¯¶å¯¶ç”¨å“ -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="bg-pink-50 px-4 py-3 border-b border-pink-100 font-bold text-pink-800">ğŸ‘¶ å¯¶å¯¶ç”¨å“ (1Y4M)</div>
                    <div class="p-2">
                        <p class="px-4 py-2 text-xs text-gray-500 italic">å»ºè­°ï¼šå°¿å¸ƒåœ¨æ—¥æœ¬è²·ï¼Œè¡Œæç®±ç•™çµ¦æˆ°åˆ©å“</p>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">è¼•ä¾¿æ¨è»Š (å»ºè­°å¯å¹³èºº/æ©Ÿé–€å–è»Š)</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">å¥¶ç²‰åˆ†è£ç›’ / å¥¶ç“¶ x2 / åˆ·å…·</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">å‰¯é£Ÿå“æ–™ç†åŒ… (3-5å¤©é‡)</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">é£Ÿç‰©å‰ª / å¯¶å¯¶é¤å…· / åœå…œ</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">å®‰æ’«ç©å…· / è¢«è¢« / å¥¶å˜´</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">å¸¸å‚™è—¥ (é€€ç‡’/æ„Ÿå†’/è…¸èƒƒ/OKç¹ƒ)</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span class="text-sm">æ³³è¡£ / æ¸¸æ³³å°¿å¸ƒ (ç€¨é•·å³¶ç©æ°´ç”¨)</span></label>
                    </div>
                </div>

                <!-- å¤§äººè¡Œæ -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="bg-green-50 px-4 py-3 border-b border-green-100 font-bold text-green-800">ğŸ‘• å¤§äººè¡Œæå»ºè­°</div>
                    <div class="p-2 text-sm text-gray-700">
                        <div class="px-4 py-2">
                            <p class="font-bold text-xs mb-1">è¡£ç‰©æ•¸é‡åƒè€ƒï¼š</p>
                            <ul class="list-disc list-inside text-xs space-y-1">
                                <li>çŸ­è¢–/è–„é•·è¢– x 5 å¥—</li>
                                <li>è–„å¤–å¥—/é˜²é¢¨å¤–å¥— x 1 (æ²–ç¹©æµ·é¢¨å¤§)</li>
                                <li>è²¼èº«å…§è¡£è¤² x 6 å¥— (å»ºè­°å¤šå¸¶ä¸€å¥—å‚™ç”¨)</li>
                                <li>å¥½èµ°çš„é‹å‹•é‹ x 1 / æ¶¼æ‹–é‹ x 1</li>
                            </ul>
                        </div>
                        <label class="checklist-item"><input type="checkbox"> <span>è¡Œå‹•é›»æº / å……é›»ç·š / è½‰æ¥é ­(æ—¥æœ¬ä¸ç”¨)</span></label>
                        <label class="checklist-item"><input type="checkbox"> <span>å€‹äººç›¥æ´—ä¿é¤Šå“ / éš±å½¢çœ¼é¡</span></label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 3: æ³¨æ„äº‹é … -->
        <div id="content-notes" class="tab-content">
            <div class="space-y-4">
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-blue-700 mb-3 border-b pb-2 flex items-center">
                        <i class="fas fa-plane-arrival mr-2"></i> æ­æ©Ÿæ³¨æ„äº‹é …
                    </h3>
                    <ul class="text-xs text-gray-600 space-y-3 leading-relaxed">
                        <li><strong>ğŸ›’ æ¨è»Šè¨—é‹ï¼š</strong> å»ºè­°åœ¨æ«ƒå°å ±åˆ°æ™‚è¦æ±‚ã€Œæ©Ÿé–€å–è»Š (Gate Check)ã€ã€‚æ‚¨å¯ä»¥ä¸€è·¯æ¨åˆ°ç™»æ©Ÿå£äº¤çµ¦åœ°å‹¤ï¼Œä¸‹æ©Ÿæ™‚åœ¨æ©Ÿé–€é ˜å–ï¼Œæ¸›å°‘åœ¨æ©Ÿå ´æŠ±å°å­©çš„é«”åŠ›æ¶ˆè€—ã€‚</li>
                        <li><strong>ğŸ¼ é™è½å®‰æ’«ï¼š</strong> 1æ­²å¤šå¯¶å¯¶è€³å£“ä¸é©æ™‚ï¼Œè«‹åœ¨èµ·é£›èˆ‡é™è½æ™‚è®“å¯¶å¯¶ã€Œå–å¥¶ã€æˆ–ã€Œå¸å¥¶å˜´ã€ï¼Œå¼•å°ååš¥å‹•ä½œå¯ç·©è§£ç–¼ç—›ã€‚</li>
                        <li><strong>ğŸ± å¯¶å¯¶é¤ï¼š</strong> JAL é€šå¸¸éœ€æå‰é ç´„å¯¶å¯¶é¤ (Baby Meal)ï¼Œè«‹å‡ºç™¼å‰ 3 å¤©ç¢ºèªã€‚AirAsia ç‚ºå»‰èˆªï¼Œéœ€è‡ªå‚™å¯¶å¯¶é›¶é£Ÿã€‚</li>
                    </ul>
                </div>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-green-700 mb-3 border-b pb-2 flex items-center">
                        <i class="fas fa-car mr-2"></i> æ²–ç¹©è‡ªé§•å®‰å…¨
                    </h3>
                    <ul class="text-xs text-gray-600 space-y-3 leading-relaxed">
                        <li><strong>ğŸ’º å…’ç«¥åº§æ¤…ï¼š</strong> æ—¥æœ¬æ³•å¾‹è¦å®š 6 æ­²ä»¥ä¸‹å¼·åˆ¶ä½¿ç”¨ã€‚å–è»Šæ™‚è«‹å‹™å¿…ç¢ºèªåº§æ¤…å®‰è£ç©©å›ºï¼Œä¸å¯å› ç‚ºå¯¶å¯¶å“­é¬§å°±æŠ±åœ¨æ‡·è£¡ã€‚</li>
                        <li><strong>ğŸš¦ äº¤é€šå®ˆå‰‡ï¼š</strong> ã€Œå³é§•ã€æ–°æ‰‹è«‹è¨˜å¾—ï¼šè½‰å½æ™‚ã€Œå·¦å°å³å¤§ã€ã€‚æ²–ç¹©å¸‚å€é€Ÿé™è¼ƒä½ (40-50km)ï¼Œè«‹å‹¿æ¶å¿«ã€‚</li>
                        <li><strong>ğŸ…¿ï¸ åœè»Šï¼š</strong> æ™¯é»å¤šæœ‰å…è²»åœè»Šï¼Œä½†é‚£éœ¸å¸‚å€é£¯åº—å¤šéœ€å¦ä»˜ 1000-1500å††/æ™šã€‚</li>
                    </ul>
                </div>
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-orange-700 mb-3 border-b pb-2 flex items-center">
                        <i class="fas fa-utensils mr-2"></i> é£²é£Ÿèˆ‡è£œè²¨
                    </h3>
                    <ul class="text-xs text-gray-600 space-y-3 leading-relaxed">
                        <li><strong>ğŸ¶ æ³¡å¥¶ç”¨æ°´ï¼š</strong> æ—¥æœ¬è‡ªä¾†æ°´å¯ç”Ÿé£²ä½†å«ç¤¦ç‰©è³ªï¼Œå»ºè­°åœ¨è¶…å¸‚è³¼è²·æ¨™è¨»ã€Œç´”æ°´ã€æˆ–å¯¶å¯¶å°ˆç”¨çš„ç“¶è£æ°´æ³¡å¥¶ã€‚</li>
                        <li><strong>ğŸ¤± è¦ªå­è¨­æ–½ï¼š</strong> æ²–ç¹©ç™¾è²¨å…¬å¸ (AEON, iias) çš„å“ºä¹³å®¤è¨­å‚™éå¸¸å®Œå–„ (ç†±æ°´ã€å°¿å¸ƒå°ã€éš±ç§éš”é–“)ï¼Œå¯æ”¾å¿ƒå®‰æ’é•·æ™‚é–“é€›è¡—ã€‚</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- AI Chat Modal -->
        <div id="ai-modal" class="fixed inset-0 bg-black/50 z-[60] hidden flex items-center justify-center p-4">
            <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl flex flex-col max-h-[80vh]">
                <div class="p-4 border-b flex justify-between items-center bg-purple-600 text-white rounded-t-2xl">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-robot"></i>
                        <h3 class="font-bold text-sm">æ²–ç¹©æ—…éŠåŠ©æ‰‹</h3>
                    </div>
                    <button onclick="toggleAIChat()"><i class="fas fa-times"></i></button>
                </div>
                <div id="ai-response-container" class="p-4 overflow-y-auto flex-grow text-sm text-gray-700 leading-relaxed">
                    æ‚¨å¥½ï¼æˆ‘å·²æº–å‚™å¥½è®€å–æ‚¨ç›®å‰çš„è¡Œç¨‹è¦åŠƒã€‚<br>
                    æ‚¨å¯ä»¥å•æˆ‘èˆ‡ 2026/3/28 èµ·çš„è¡Œç¨‹ç›¸é—œå•é¡Œã€‚
                </div>
                <div id="ai-loading" class="hidden p-4 text-center text-purple-600 font-medium">
                    æ­£åœ¨åˆ†æç›®å‰è¦åŠƒ...
                </div>
                <div class="p-4 border-t bg-gray-50 rounded-b-2xl">
                    <div class="flex space-x-2">
                        <input id="ai-input" type="text" placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œ..." class="flex-grow border rounded-xl px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 shadow-sm">
                        <button onclick="handleCustomQuery()" class="bg-purple-600 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-purple-700 transition shadow-md">
                            å‚³é€
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t p-3 flex justify-around items-center max-w-md mx-auto shadow-2xl z-40">
        <button onclick="switchMainTab('itinerary')" class="text-center text-blue-600">
            <i class="fas fa-route block text-lg"></i>
            <span class="text-[10px] font-bold">ç²¾ç´°è¡Œç¨‹</span>
        </button>
        <button onclick="toggleAIChat()" class="text-center text-purple-600">
            <i class="fas fa-comments block text-lg"></i>
            <span class="text-[10px] font-bold">å•åŠ©æ‰‹</span>
        </button>
    </nav>

    <script>
        let currentApiKey = localStorage.getItem('GEMINI_API_KEY') || "";

        function switchMainTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById('content-' + tabId).classList.add('active');
            ['itinerary', 'preparation', 'notes'].forEach(t => {
                const btn = document.getElementById('main-tab-' + t);
                if (!btn) return;
                if (t === tabId) { btn.classList.add('bg-white', 'text-blue-700', 'shadow-sm'); btn.classList.remove('text-white'); }
                else { btn.classList.remove('bg-white', 'text-blue-700', 'shadow-sm'); btn.classList.add('text-white'); }
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showDay(day) {
            document.querySelectorAll('.day-card').forEach(card => card.classList.remove('active'));
            const target = document.getElementById('day-' + day);
            if (target) target.classList.add('active');
            document.querySelectorAll('.day-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white', 'shadow-md');
                btn.classList.add('bg-white', 'text-gray-600', 'border', 'border-gray-200');
            });
            document.getElementById('btn-' + day).classList.add('bg-blue-600', 'text-white', 'shadow-md');
        }

        function setupApiKey() {
            const key = prompt("è¼¸å…¥ Gemini API Key:", currentApiKey);
            if (key !== null) { currentApiKey = key.trim(); localStorage.setItem('GEMINI_API_KEY', currentApiKey); alert("é‡‘é‘°è¨­ç½®æˆåŠŸï¼"); }
        }

        // ç²å–ç›®å‰ä½ç½®
        function getGeoLocation() {
            return new Promise((resolve) => {
                if ("geolocation" in navigator) {
                    navigator.geolocation.getCurrentPosition(
                        (pos) => resolve(`ç·¯åº¦: ${pos.coords.latitude}, ç¶“åº¦: ${pos.coords.longitude}`),
                        () => resolve("ä½ç½®æ¬Šé™æœªé–‹å•Ÿæˆ–ç„¡æ³•å–å¾—åº§æ¨™")
                    );
                } else {
                    resolve("ç€è¦½å™¨ä¸æ”¯æ´å®šä½åŠŸèƒ½");
                }
            });
        }

        async function askGemini(query) {
            const container = document.getElementById('ai-response-container');
            const loading = document.getElementById('ai-loading');
            const modal = document.getElementById('ai-modal');
            modal.classList.remove('hidden');

            if (!currentApiKey) {
                container.innerHTML = "è«‹å…ˆé»æ“Šä¸Šæ–¹ <i class='fas fa-key'></i> è¨­ç½® API Keyã€‚";
                return;
            }

            loading.classList.remove('hidden');
            try {
                // 1. æŠ“å–ç›®å‰é é¢çš„æ–‡å­—ï¼ˆæœ€å³æ™‚ã€ç›´æ¥ï¼‰
                const currentContent = document.body.innerText.substring(0, 10000);
                // 2. ç²å–ç›®å‰åº§æ¨™
                const locationStr = await getGeoLocation();
                const todayDate = new Date().toISOString().split('T')[0];

                const fullPrompt = `
                    ç•¶å‰ç³»çµ±æ—¥æœŸï¼š${todayDate}
                    è¡Œç¨‹åŸºç¤æ—¥æœŸï¼šD1 ç‚º 2026-03-28 (ä»¥æ­¤é¡æ¨ D2=3/29, D3=3/30...)
                    ä½¿ç”¨è€…ç›®å‰æ‰€åœ¨åœ°é»åº§æ¨™è³‡è¨Šï¼š${locationStr}
                    
                    ä»¥ä¸‹æ˜¯ç•¶å‰é é¢æ‰€æœ‰çš„è¡Œç¨‹èˆ‡è³‡è¨Šï¼š
                    """
                    ${currentContent}
                    """

                    ä½¿ç”¨è€…æå•ï¼š
                    ${query}

                    ã€æŒ‡ä»¤è¦ç¯„ã€‘
                    1. (1) å¦‚æœå•çš„æ˜¯è¡Œç¨‹ç´°ç¯€ï¼ˆå¦‚ä½å®¿ã€æ©Ÿç¥¨æ™‚é–“ã€æŸæ—¥å¹¾é»å‡ºé–€ï¼‰ï¼Œè«‹å¾ä¸Šæ–¹æ–‡å­—å…§å®¹æå–ä¸¦å›ç­”ã€‚
                    2. (2) å¦‚æœä½¿ç”¨è€…æƒ³èª¿æ•´è¡Œç¨‹ï¼ˆå¦‚æ”¹å»æŸè™•ï¼‰ï¼Œè«‹æ ¹æ“šè©²æ™¯é»ä½ç½®æä¾›äº¤é€šå»ºè­°èˆ‡è¦ªå­é©é…æ€§åˆ†æã€‚
                    3. (3) å¦‚æœå•çš„æ˜¯è§€å…‰/é£²é£Ÿ/è³¼ç‰©å»ºè­°ï¼Œè«‹å„ªå…ˆçµåˆä½¿ç”¨è€…ç›®å‰çš„åº§æ¨™ä½ç½®çµ¦å‡ºé„°è¿‘å»ºè­°ï¼Œä¸¦è€ƒæ…®åˆ°å¸¶è‘— 1Y4M å°å­©çš„éœ€æ±‚ã€‚
                    4. å›ç­”è«‹è¦ªåˆ‡ã€ä½¿ç”¨ç¹é«”ä¸­æ–‡ã€‚
                `;

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${currentApiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: fullPrompt }] }],
                        systemInstruction: { parts: [{ text: "ä½ æ˜¯ä¸€ä½è³‡æ·±æ²–ç¹©è¦ªå­æ—…éŠå°éŠï¼Œå”åŠ©ä½¿ç”¨è€…æ ¹æ“šç›®å‰ç¶²é å‘ˆç¾çš„è³‡è¨Šèˆ‡å…¶ç•¶ä¸‹ä½ç½®æä¾›æ—…éŠå»ºè­°" }] }
                    })
                });
                
                const data = await response.json();
                const text = data.candidates?.[0]?.content?.parts?.[0]?.text || "æŠ±æ­‰ï¼Œç›®å‰ç„¡æ³•å›æ‡‰ã€‚";
                container.innerHTML = text.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                container.scrollTop = container.scrollHeight;
            } catch (e) {
                container.innerHTML = "ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ– API Key æ˜¯å¦æ­£ç¢ºã€‚";
            } finally {
                loading.classList.add('hidden');
            }
        }

        function toggleAIChat() { document.getElementById('ai-modal').classList.toggle('hidden'); }
        function handleCustomQuery() {
            const input = document.getElementById('ai-input');
            if (input.value) { askGemini(input.value); input.value = ''; }
        }
    </script>
</body>
</html>
